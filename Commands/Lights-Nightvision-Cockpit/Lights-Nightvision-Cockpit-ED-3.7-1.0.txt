--

- pulls = off (detection)
- EDbind:key-variables for Ship/SRV lights
- EDDI:(Status lights on), (Status vehicle)

# Ship/SRV lights, this command detects the vehicle-type and status of light.
# You can either toggle or say lights off/on/twice or full-beam, from any mode it goes to the spoken command.

-- ↓ Environment conditions
Begin Condition : ([{TXT:Status vehicle}] Equals 'Ship' AND [{TXT:Environment}] Equals 'Normal space') OR ([{TXT:Status vehicle}] Equals 'Ship' AND [{TXT:Environment}] Equals 'Supercruise') OR ([{TXT:Status vehicle}] Equals 'Ship' AND [{TXT:Environment}] Equals 'Docked')
    -- ↓ Ship lights (toggle)
    Begin Condition : [{CMD}] Equals 'Lights' OR ([{CMD}] Equals 'Lights on' AND [Status lights on] Equals False) OR ([{CMD}] Equals 'Full beam' AND [Status lights on] Equals False) OR ([{CMD}] Equals 'Lights twice' AND [Status lights on] Equals False) OR ([{CMD}] Equals 'Lights off' AND [Status lights on] Equals True) OR ([{CMD}] Equals 'Lights of' AND [Status lights on] Equals True) OR ([{CMD}] Equals 'Lights pulls' AND [Status lights on] Equals True)
        Press variable key(s) [edShipSpotLightToggle] and hold for 0,1 seconds and release
        Begin Boolean Compare : [Debug Write] Equals True
            Write [Yellow] '-- ship Lights' to log
        End Condition
    End Condition
    
    -- ↓ Environment conditions
Else If : ([{TXT:Status vehicle}] Equals 'SRV' AND [{TXT:Environment}] Equals 'Normal space')
    -- ↓ SRV lights (toggle)
    Begin Text Compare : [{CMD}] Equals 'Lights'
        Begin Boolean Compare : [Status lights on] Equals True
            Press variable key(s) [edHeadlightsBuggyButton] and hold for 0,1 seconds and release
            Begin Boolean Compare : [Status lights on] Equals False
                Set Boolean [Status full beam] to False
            Else
                Set Boolean [Status full beam] to True
            End Condition
        Else
            Set Boolean [Status full beam] to False
            Press variable key(s) [edHeadlightsBuggyButton] and hold for 0,1 seconds and release
        End Condition
        Begin Boolean Compare : [Debug Write] Equals True
            Write [Yellow] '-- srv Lights' to log
        End Condition
        
    Else If : ([{CMD}] Equals 'Lights on' AND [Status lights on] Equals False)
        -- SRV on
        Set Boolean [Status full beam] to False
        Press variable key(s) [edHeadlightsBuggyButton] and hold for 0,1 seconds and release
        Begin Boolean Compare : [Debug Write] Equals True
            Write [Yellow] '-- srv on' to log
        End Condition
        
    Else If : ([{CMD}] Equals 'Lights on' AND [Status lights on] Equals True AND [Status full beam] Equals True)
        -- SRV on from full beam
        Set Boolean [Status full beam] to False
        Press variable key(s) [edHeadlightsBuggyButton] and hold for 0,1 seconds and release
        Press variable key(s) [edHeadlightsBuggyButton] and hold for 0,1 seconds and release
        Begin Boolean Compare : [Debug Write] Equals True
            Write [Yellow] '-- srv on' to log
        End Condition
        
    Else If : ([{CMD}] Equals 'Lights of' AND [Status lights on] Equals True) OR ([{CMD}] Equals 'Lights off' AND [Status lights on] Equals True) OR ([{CMD}] Equals 'Lights pulls' AND [Status lights on] Equals True)
        -- SRV off
        Begin Boolean Compare : [Status full beam] Equals False
            Press variable key(s) [edHeadlightsBuggyButton] and hold for 0,1 seconds and release
        End Condition
        Press variable key(s) [edHeadlightsBuggyButton] and hold for 0,1 seconds and release
        Set Boolean [Status full beam] to False
        Begin Boolean Compare : [Debug Write] Equals True
            Write [Yellow] '-- srv off' to log
        End Condition
        
    Else If : [{CMD}] Equals 'Full beam' OR [{CMD}] Equals 'Lights twice'
        -- lights TWICE; FULL BEAM;
        Begin Boolean Compare : [Status lights on] Equals False
            Set Boolean [Status full beam] to False
        End Condition
        Begin Text Compare : [{TXT:Status vehicle}] Equals 'Ship'
        Else If Text Compare : [{TXT:Status vehicle}] Equals 'SRV'
            Begin Condition : ([Status full beam] Equals False AND [Status lights on] Equals False)
                Press variable key(s) [edHeadlightsBuggyButton] and hold for 0,1 seconds and release
                Press variable key(s) [edHeadlightsBuggyButton] and hold for 0,1 seconds and release
                Set Boolean [Status full beam] to True
                Begin Boolean Compare : [Debug Write] Equals True
                    Write [Yellow] '-- srv full beam (twice)' to log
                End Condition
            Else If : ([Status lights on] Equals True AND [Status full beam] Equals False)
                Press variable key(s) [edHeadlightsBuggyButton] and hold for 0,1 seconds and release
                Set Boolean [Status full beam] to True
                Begin Boolean Compare : [Debug Write] Equals True
                    Write [Yellow] '-- srv full beam (once)' to log
                End Condition
            Else
                Play sound, '{VA_SOUNDS}\Malic Profile\Alert Sounds\Windows Hardware Remove.wav'
                Begin Boolean Compare : [Debug Write] Equals True
                    Write [Yellow] '-- full beam else end' to log
                End Condition
            End Condition
        End Condition
    Else
        Play sound, '{VA_SOUNDS}\Malic Profile\Alert Sounds\Windows Hardware Remove.wav'
        Begin Boolean Compare : [Debug Write] Equals True
            Write [Yellow] '-- srv else sub end' to log
        End Condition
    End Condition
End Condition